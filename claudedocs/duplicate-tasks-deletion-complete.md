# ì¤‘ë³µ ì—…ë¬´ ì‚­ì œ ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“… ì‘ì—… ì¼ì
2026-02-03

## ğŸ¯ ì‘ì—… ëª©í‘œ

**ìš”ì²­ì‚¬í•­**: /admin/tasks í˜ì´ì§€ì—ì„œ ë™ì¼í•œ ì‚¬ì—…ì¥, ë™ì¼í•œ ì—…ë¬´ë‹¨ê³„, ë™ì¼í•œ ì—…ë¬´íƒ€ì…ìœ¼ë¡œ ë“±ë¡ëœ ì¤‘ë³µ ì—…ë¬´ ì‚­ì œ

**ì¤‘ë³µ íŒë‹¨ ê¸°ì¤€**:
- `business_name` (ì‚¬ì—…ì¥ëª…)
- `status` (ì—…ë¬´ë‹¨ê³„)
- `task_type` (ì—…ë¬´íƒ€ì…)

## ğŸ“Š ì‘ì—… ê²°ê³¼

### ì‚­ì œ ì „ í˜„í™©
```
âœ… ì „ì²´ ì—…ë¬´: 3,114ê°œ
ğŸ” ì¤‘ë³µ ê·¸ë£¹ ìˆ˜: 40ê°œ
ğŸ“Š ì¤‘ë³µ ì—…ë¬´ ì´ ê°œìˆ˜: 87ê°œ
âŒ ì‚­ì œ ëŒ€ìƒ: 47ê°œ (ê° ê·¸ë£¹ì—ì„œ ìµœì‹  1ê°œ ì œì™¸)
```

### ì‚­ì œ í›„ í˜„í™©
```
âœ… ì „ì²´ ì—…ë¬´: 3,067ê°œ (3,114 - 47)
ğŸ” ì¤‘ë³µ ê·¸ë£¹ ìˆ˜: 0ê°œ
âœ… ì¤‘ë³µëœ ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤.
```

### ì‚­ì œ ì‹¤í–‰ ê²°ê³¼
```
âœ… ì„±ê³µ: 47ê°œ
âŒ ì‹¤íŒ¨: 0ê°œ
ğŸ“Š ì „ì²´: 47ê°œ

ì‚­ì œ ë°©ì‹: Soft Delete (is_deleted = true)
ë³µêµ¬ ê°€ëŠ¥: âœ… Yes
```

## ğŸ” ì‚­ì œëœ ì¤‘ë³µ ì—…ë¬´ íŒ¨í„´ ë¶„ì„

### ê³µí†µ íŒ¨í„´
ëª¨ë“  47ê°œ ì‚­ì œ ëŒ€ìƒì´ ë™ì¼í•œ íŒ¨í„´:
- **task_type**: `dealer` (ëŒ€ë¦¬ì )
- **status**: `dealer_product_ordered` (ì œí’ˆ ë°œì£¼)
- **êµ¬ë²„ì „ title**: "ë³´ì¡°ê¸ˆ ì…ê¸ˆ" (âŒ ì˜ëª»ëœ ë§¤í•‘)
- **ì‹ ë²„ì „ title**: "ì œí’ˆ ë°œì£¼" (âœ… ì˜¬ë°”ë¥¸ ë§¤í•‘)

### ë°œìƒ ì‹œê¸°
- **êµ¬ë²„ì „ ìƒì„±**: 2026-02-02 ì˜¤í›„ 2ì‹œëŒ€
- **ì‹ ë²„ì „ ìƒì„±**: 2026-02-02 ì˜¤í›„ 3-4ì‹œëŒ€

### ê·¼ë³¸ ì›ì¸
ì—‘ì…€ ì¼ê´„ë“±ë¡ ì‹œ `getStatusCodeFromKorean` í•¨ìˆ˜ê°€ task_typeì„ ê³ ë ¤í•˜ì§€ ì•Šì•„ ë°œìƒ
- ì°¸ì¡°: [fix-bulk-upload-task-type-mapping.md](fix-bulk-upload-task-type-mapping.md)

## ğŸ“‹ ì‚­ì œëœ ì‚¬ì—…ì¥ ëª©ë¡ (40ê°œ)

### ëŒ€í‘œ ì‚¬ë¡€ë“¤

**1. í•œì¼ì „ë™ì§€ê²Œì°¨**
```
âœ… ë³´ì¡´ (ìµœì‹ )
- ID: f5b19cfc-f4f3-4b0c-a381-ae8993579494
- Title: í•œì¼ì „ë™ì§€ê²Œì°¨ - ì œí’ˆ ë°œì£¼
- Created: 2026-02-02 16:13:58

âŒ ì‚­ì œ (êµ¬ë²„ì „)
- ID: a44cac1c-1fb3-4a6f-89ea-b13462f00273
- Title: í•œì¼ì „ë™ì§€ê²Œì°¨ - ë³´ì¡°ê¸ˆ ì…ê¸ˆ
- Created: 2026-02-02 14:09:45
```

**2. (ì£¼)ëŒ€í•˜ì—ì½”í…** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)
```
âœ… ë³´ì¡´ (ìµœì‹ )
- ID: ce717976-eeed-4530-b32e-329de32a98d7
- Title: (ì£¼)ëŒ€í•˜ì—ì½”í… - ì œí’ˆ ë°œì£¼
- Created: 2026-02-02 16:13:55

âŒ ì‚­ì œ 1
- ID: a93b27f9-3470-4458-ada0-e7b130e44a86
- Created: 2026-02-02 15:10:00

âŒ ì‚­ì œ 2
- ID: 94cde870-0fb4-4255-9e4e-5616bd054f58
- Created: 2026-02-02 14:09:42
```

**3. (ì£¼)ì—˜í‚¹ë¤** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)
**4. (ì£¼)ì¼ì„±ì— í…** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)
**5. (ì£¼)ì„¸ì°½ì‚°ì—…(ë°°ì¶œêµ¬2)** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)
**6. (ì£¼)íƒœì‚°í™˜ê²½** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)
**7. ì„ì •ìˆ˜ì§€** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)
**8. ì£¼ì‹íšŒì‚¬ ì„ë¼ë§¥ìŠ¤** (3ê°œ â†’ 1ê°œ, 2ê°œ ì‚­ì œ)

### ì „ì²´ ëª©ë¡ (40ê°œ ì‚¬ì—…ì¥)
1. ãˆœê·¸ë¦°í’‹ì›¨ì–´
2. (ì£¼)ëŒ€í•˜ì—ì½”í…
3. (ì£¼)ë„ì„±ì¼€ë¯¸ì¹¼
4. (ì£¼)ë™ì„±ì¼€ë¯¸ì»¬
5. (ì£¼)ë¶€ê³¡í™˜ê²½
6. (ì£¼)ë¶€ë¦¼ì—í”„ì— ë¹„
7. (ì£¼)ì„¸ì°½ì‚°ì—…(ë°°ì¶œêµ¬2)
8. (ì£¼)ì—ì´ì—”ì—ìŠ¤í…Œí¬ë†€ë¡œì§€
9. (ì£¼)ì—˜í‚¹ë¤
10. (ì£¼)ì˜¤í¼ìŠ¤í¼ë‹ˆì²˜
11. (ì£¼)ì¼ì„±ì— í…
12. (ì£¼)ì§„í¥ê¸°ì—…
13. (ì£¼)ì¼€ì´ì—ìŠ¤ì—”
14. (ì£¼)ì¼€ì´í‹°í”¼í…Œí¬
15. (ì£¼)ì½”ë ˆì‰¬í…
16. (ì£¼)íƒœì‚°í™˜ê²½
17. (ì£¼)í„°ì¹˜í”Œëœ_ì§„ì²œê³µì¥
18. (ì£¼)í•œêµ­ê·¸ë¦°í”¼ìŠ¤
19. ê·¸ë¦°ì—”í…ì½¤(ì£¼)
20. ê¸°ë¦¼ì‚°ì—…(ì£¼)
21. ëŠ¥ì£¼ì¢…í•©ìë™ì°¨ì •ë¹„ê³µì—…ì‚¬
22. ëŒ€ë¦¼ì œì¬ì†Œ
23. ëŒ€ì˜ê¸ˆì†
24. ëŒ€ì˜ì¢…í•©ë„ì¥(ì£¼)
25. ë‘ì¼ì‚°ì—…
26. ë¯¸ì§„ì‚°ì—…ì‚¬
27. ì‚¬ë³´ìš°ë“œì‚°ì—…
28. ì„ì •ìˆ˜ì§€
29. ì†¡ì£½ê¸€ë¡œë¸Œ(ì£¼)ì œ3ê³µì¥
30. ì•¼ì„±í•˜ì´í…
31. ì˜ì§„í† ëª©
32. ìš°ì„±T&C
33. ì´ì§€í…Œí¬(ì£¼)
34. ì´ì§€í…Œí¬(ì£¼)_ë°°ì¶œCT 2ê°œ ì¶”ê°€
35. ì´í”¼í…Œí¬
36. ì œì´ì—ì´ì¹˜ì‚°ì—…
37. ì£¼ì‹íšŒì‚¬ ì„ë¼ë§¥ìŠ¤
38. ì§ì•”íŠ¹ìˆ˜ê¸ˆì†
39. í•œì¼ì „ë™ì§€ê²Œì°¨
40. íš¨ì›ì‚°ì—…ê°œë°œ(ì£¼)

## ğŸ›¡ï¸ ì•ˆì „ì¥ì¹˜ ì ìš©

### 1. Soft Delete ë°©ì‹
```sql
UPDATE facility_tasks
SET is_deleted = true, updated_at = NOW()
WHERE id IN (...)
```
- âœ… ì‹¤ì œ ë°ì´í„° ì‚­ì œ ì•„ë‹˜
- âœ… ë³µêµ¬ ê°€ëŠ¥
- âœ… ë°ì´í„° ì†ì‹¤ ë°©ì§€

### 2. ì‚­ì œ ì „ í™•ì¸ ì ˆì°¨
```
1. ì¤‘ë³µ ëª©ë¡ ìƒì„¸ ì¡°íšŒ ë° ë¯¸ë¦¬ë³´ê¸°
2. 3ì´ˆ ëŒ€ê¸°
3. ì‚­ì œ ëŒ€ìƒ ì¬í™•ì¸
4. 5ì´ˆ ëŒ€ê¸° (Ctrl+Cë¡œ ì·¨ì†Œ ê°€ëŠ¥)
5. ì‚­ì œ ì‹¤í–‰
```

### 3. ìƒì„¸ ë¡œê·¸ ê¸°ë¡
- ê° ì‚¬ì—…ì¥ë³„ ì‚­ì œ ì§„í–‰ ìƒí™© í‘œì‹œ
- ì„±ê³µ/ì‹¤íŒ¨ ê°œë³„ ê¸°ë¡
- ìµœì¢… ìš”ì•½ í†µê³„ ì œê³µ

## ğŸ”„ ë³µêµ¬ ë°©ë²•

### ê°œë³„ ì—…ë¬´ ë³µêµ¬
```sql
UPDATE facility_tasks
SET is_deleted = false, updated_at = NOW()
WHERE id = 'task_id';
```

### ì¼ê´„ ë³µêµ¬ (íŠ¹ì • ì‹œê°„ ì´í›„ ì‚­ì œëœ ëª¨ë“  í•­ëª©)
```sql
UPDATE facility_tasks
SET is_deleted = false, updated_at = NOW()
WHERE is_deleted = true
  AND updated_at > '2026-02-03 10:00:00';
```

### íŠ¹ì • ì‚¬ì—…ì¥ë§Œ ë³µêµ¬
```sql
UPDATE facility_tasks
SET is_deleted = false, updated_at = NOW()
WHERE is_deleted = true
  AND business_name = 'í•œì¼ì „ë™ì§€ê²Œì°¨';
```

## ğŸ”— ê´€ë ¨ ì´ìŠˆ í•´ê²°

### ì´ìŠˆ 1: í•œì¼ì „ë™ì§€ê²Œì°¨ ì¤‘ë³µ í‘œì‹œ âœ…
**ë¬¸ì œ**: ë¯¸ë‹ˆ ì¹¸ë°˜ë³´ë“œì— "ì œí’ˆ ë°œì£¼" 2ê°œë¡œ í‘œì‹œ
**í•´ê²°**: êµ¬ë²„ì „ "ë³´ì¡°ê¸ˆ ì…ê¸ˆ" ì—…ë¬´ ì‚­ì œë¡œ í•´ê²°

### ì´ìŠˆ 2: Task Title í‘œì‹œ í˜¼ë™ âœ…
**ë¬¸ì œ**: titleê³¼ statusê°€ ë¶ˆì¼ì¹˜í•˜ì—¬ í˜¼ë™ ë°œìƒ
**í•´ê²°**: UIì—ì„œ title í‘œì‹œ ì œê±°, status labelë§Œ í‘œì‹œ
- ì°¸ì¡°: [fix-task-title-display-confusion.md](fix-task-title-display-confusion.md)

## ğŸ“š ìƒì„±ëœ íŒŒì¼

### ìŠ¤í¬ë¦½íŠ¸
1. **[scripts/find-duplicate-tasks.js](../scripts/find-duplicate-tasks.js)**
   - ì¤‘ë³µ ì—…ë¬´ ì¡°íšŒ ë° ìƒì„¸ ë¶„ì„
   - ë³´ì¡´/ì‚­ì œ ëŒ€ìƒ êµ¬ë¶„ í‘œì‹œ

2. **[scripts/delete-duplicate-tasks.js](../scripts/delete-duplicate-tasks.js)**
   - ì¤‘ë³µ ì—…ë¬´ soft delete ì‹¤í–‰
   - ë¯¸ë¦¬ë³´ê¸° ë° ì•ˆì „ì¥ì¹˜ ì ìš©

### ë¬¸ì„œ
1. **[duplicate-tasks-deletion-design.md](duplicate-tasks-deletion-design.md)**
   - ì „ì²´ ì„¤ê³„ ë¬¸ì„œ
   - UI ê¸°ëŠ¥ ì¶”ê°€ ê³„íš í¬í•¨

2. **[duplicate-tasks-deletion-complete.md](duplicate-tasks-deletion-complete.md)**
   - ë³¸ ë¬¸ì„œ: ì‘ì—… ì™„ë£Œ ë³´ê³ ì„œ

## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ì¤‘ë³µ ì—…ë¬´ ì¡°íšŒ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
- [x] 40ê°œ ê·¸ë£¹, 87ê°œ ì¤‘ë³µ ì—…ë¬´ í™•ì¸
- [x] ì‚­ì œ ëŒ€ìƒ 47ê°œ í™•ì¸ (ê° ê·¸ë£¹ì—ì„œ ìµœì‹  1ê°œ ì œì™¸)
- [x] Soft delete ë°©ì‹ìœ¼ë¡œ 47ê°œ ì—…ë¬´ ì‚­ì œ
- [x] ì‚­ì œ ì„±ê³µ: 47ê°œ, ì‹¤íŒ¨: 0ê°œ
- [x] ì¤‘ë³µ ì¬í™•ì¸: 0ê°œ ê·¸ë£¹
- [x] ì „ì²´ ì—…ë¬´ ìˆ˜ í™•ì¸: 3,114ê°œ â†’ 3,067ê°œ
- [x] ë³µêµ¬ ë°©ë²• ë¬¸ì„œí™”

## ğŸ“Š í†µê³„ ìš”ì•½

### Before
```
ì „ì²´ ì—…ë¬´:        3,114ê°œ
í™œì„± ì—…ë¬´:        3,114ê°œ
ì‚­ì œëœ ì—…ë¬´:      0ê°œ
ì¤‘ë³µ ê·¸ë£¹:        40ê°œ
ì¤‘ë³µ ì—…ë¬´:        87ê°œ
```

### After
```
ì „ì²´ ì—…ë¬´:        3,114ê°œ
í™œì„± ì—…ë¬´:        3,067ê°œ  (â–³ -47)
ì‚­ì œëœ ì—…ë¬´:      47ê°œ     (â–³ +47)
ì¤‘ë³µ ê·¸ë£¹:        0ê°œ      (â–³ -40)
ì¤‘ë³µ ì—…ë¬´:        0ê°œ      (â–³ -87)
```

### ë°ì´í„° ì •ë¦¬ íš¨ê³¼
- âœ… ì¤‘ë³µ ì—…ë¬´ 100% ì œê±° (40ê°œ ê·¸ë£¹ â†’ 0ê°œ)
- âœ… ë°ì´í„° ë¬´ê²°ì„± ê°œì„ 
- âœ… ì‚¬ìš©ì í˜¼ë™ í•´ì†Œ
- âœ… ì—…ë¬´ ê´€ë¦¬ íš¨ìœ¨ì„± í–¥ìƒ

## ğŸ’¡ í–¥í›„ ê°œì„ ì‚¬í•­

### 1. ì¤‘ë³µ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜
ì—‘ì…€ ì¼ê´„ë“±ë¡ ì‹œ ì¤‘ë³µ ì²´í¬ ë¡œì§ ì¶”ê°€ ê²€í† :
```typescript
// API: POST /api/admin/tasks/bulk-upload
// ë“±ë¡ ì „ ì¤‘ë³µ ì²´í¬
const existingTask = await supabase
  .from('facility_tasks')
  .select('id')
  .eq('business_name', businessName)
  .eq('task_type', taskType)
  .eq('status', status)
  .eq('is_deleted', false)
  .single();

if (existingTask) {
  // Skip or update existing
}
```

### 2. UI ê¸°ëŠ¥ ì¶”ê°€ (ì„ íƒì‚¬í•­)
í–¥í›„ ì¤‘ë³µì´ ì¬ë°œìƒí•  ê²½ìš°:
- admin/tasks í˜ì´ì§€ì— "ì¤‘ë³µ ì°¾ê¸°" ë²„íŠ¼
- ì¤‘ë³µ ëª©ë¡ ëª¨ë‹¬ ë° ì„ íƒ ì‚­ì œ ê¸°ëŠ¥
- ì°¸ì¡°: [duplicate-tasks-deletion-design.md](duplicate-tasks-deletion-design.md)

### 3. ëª¨ë‹ˆí„°ë§
ì •ê¸°ì ì¸ ì¤‘ë³µ ì²´í¬ ìë™í™”:
```bash
# ë§¤ì£¼ ì›”ìš”ì¼ ì‹¤í–‰
0 9 * * 1 node /path/to/scripts/find-duplicate-tasks.js
```

## ğŸ ê²°ë¡ 

**ì‘ì—… ì™„ë£Œ**: 40ê°œ ì‚¬ì—…ì¥, 47ê°œ ì¤‘ë³µ ì—…ë¬´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œ

**í•µì‹¬ ì„±ê³¼**:
1. âœ… ë°ì´í„° ì •ë¦¬ ì™„ë£Œ (ì¤‘ë³µ 0ê°œ)
2. âœ… ì•ˆì „í•œ Soft Delete (ë³µêµ¬ ê°€ëŠ¥)
3. âœ… ì‚¬ìš©ì í˜¼ë™ í•´ì†Œ
4. âœ… ì‹œìŠ¤í…œ ë°ì´í„° ë¬´ê²°ì„± ê°œì„ 

**ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬**:
- `find-duplicate-tasks.js` - í–¥í›„ ì¤‘ë³µ ì¡°íšŒìš©
- `delete-duplicate-tasks.js` - í–¥í›„ ì¤‘ë³µ ì‚­ì œìš©

ì¤‘ë³µ ì—…ë¬´ ì •ë¦¬ê°€ ì™„ë£Œë˜ì–´ /admin/tasks í˜ì´ì§€ì˜ ì—…ë¬´ ê´€ë¦¬ê°€ ë”ìš± ëª…í™•í•´ì¡ŒìŠµë‹ˆë‹¤!

# 모바일 비용 카드 순서 재정렬 설계

## 현재 문제점

### 스크린샷 분석
현재 비용 상세내역 섹션의 카드 순서:
1. 영업비용
2. 영업비용 조정 (바로 아래)
3. 실사비용
4. 실사비용 조정 (바로 아래)
5. 총 설치비
6. AS 비용
7. 총 비용 합계
8. 커스텀 추가비용

### 사용자 경험 문제
- **조정 카드가 기본 카드 바로 아래**: 조정이 없으면 빈 카드처럼 보임
- **총 비용 합계 위치**: 중간에 있어서 최종 합계로 보이지 않음
- **논리적 흐름 부족**: 기본 비용 → 조정 → 합계 순서가 직관적이지 않음

## 설계 원칙

### 1. 정보 계층 구조
```yaml
tier_1_primary_costs:
  - 영업비용 (기본값 항상 표시)
  - 실사비용 (기본값 항상 표시)
  - 총 설치비 (계산값)
  - 총 비용 합계 (최종 합계)

tier_2_adjustments:
  - 영업비용 조정 (선택적)
  - 실사비용 조정 (선택적)

tier_3_additional:
  - AS 비용 (선택적)
  - 커스텀 추가비용 (선택적)
```

### 2. 모바일 UX 최적화 전략
```yaml
readability:
  - 기본 비용을 먼저 보여주고
  - 조정 항목은 나중에 표시
  - 합계는 명확하게 마지막에 위치

scanning:
  - 위에서 아래로 자연스러운 흐름
  - 중요한 정보(합계)가 스크롤 후 표시
  - 조정 항목이 기본 항목을 방해하지 않음

hierarchy:
  - 필수 항목 → 선택 항목 → 합계
  - 명확한 시각적 구분
```

## 제안된 카드 순서

### 모바일 최적화 순서
```yaml
order:
  1: 영업비용 💼
     - 항상 표시
     - 기본 영업점 비율 계산값

  2: 실사비용 🔍
     - 항상 표시
     - 실사일 기반 계산

  3: 총 설치비 🔧
     - 항상 표시
     - 기본 + 추가 설치비 합계

  4: 총 비용 합계 💰
     - 항상 표시
     - 모든 비용의 합계
     - **중요**: 사용자가 빠르게 파악해야 할 핵심 정보

  5: 영업비용 조정 ⚙️
     - 조정이 있을 때만 표시/수정 가능
     - 기본값에서 변경된 경우

  6: 실사비용 조정 ⚙️
     - 조정이 있을 때만 표시/수정 가능
     - 기본값에서 변경된 경우

  7: AS 비용 ⚙️
     - AS가 있을 때만 표시/입력 가능
     - 선택적 추가 비용

  8: 커스텀 추가비용 📝
     - 항상 표시 (추가 가능)
     - 기타 특별 비용 입력
```

### 논리적 흐름
```
기본 비용들 (필수)
  ↓
총 합계 (중요!)
  ↓
조정 항목들 (선택)
  ↓
추가 비용들 (선택)
```

## 데스크톱 vs 모바일 차이

### 데스크톱 (2열 그리드)
현재처럼 2열 그리드에서는 순서가 덜 중요:
- 왼쪽 열: 기본 비용들
- 오른쪽 열: 조정 및 추가 비용들
- 시각적으로 한눈에 들어옴

### 모바일 (1열 스택)
**제안된 순서가 중요한 이유**:
- 위에서 아래로 스크롤하며 순차 확인
- 핵심 정보(총 비용 합계)를 빨리 확인 필요
- 조정 항목이 기본 항목 사이에 끼면 혼란

## 구현 전략

### 조건부 렌더링 전략
```tsx
// 데스크톱: 기존 2열 그리드 순서 유지
// 모바일: 새로운 1열 순서 적용

{isMobile ? (
  // 모바일 순서
  <>
    {/* 1. 기본 비용들 */}
    <영업비용카드 />
    <실사비용카드 />
    <총설치비카드 />

    {/* 2. 총 합계 (핵심!) */}
    <총비용합계카드 />

    {/* 3. 조정 항목들 */}
    <영업비용조정카드 />
    <실사비용조정카드 />

    {/* 4. 추가 비용들 */}
    <AS비용카드 />
    <커스텀추가비용카드 />
  </>
) : (
  // 데스크톱: 기존 2열 그리드
  <div className="grid grid-cols-2 gap-4">
    {/* 기존 순서 유지 */}
  </div>
)}
```

### CSS Order 활용 전략
```tsx
// 더 간단한 방법: CSS order 속성 사용
<div className="flex flex-col md:grid md:grid-cols-2 gap-4">
  <영업비용카드 className="order-1" />
  <실사비용카드 className="order-2" />
  <총설치비카드 className="order-3 md:order-5" />
  <총비용합계카드 className="order-4 md:order-7" />
  <영업비용조정카드 className="order-5 md:order-2" />
  <실사비용조정카드 className="order-6 md:order-4" />
  <AS비용카드 className="order-7 md:order-6" />
  <커스텀추가비용카드 className="order-8" />
</div>
```

## 카드별 Order 값

### 모바일 Order (order-{n})
```yaml
영업비용: order-1
실사비용: order-2
총설치비: order-3
총비용합계: order-4  # ⭐ 핵심 위치
영업비용조정: order-5
실사비용조정: order-6
AS비용: order-7
커스텀추가비용: order-8
```

### 데스크톱 Order (md:order-{n})
```yaml
# 왼쪽 열 (1, 3, 5, 7)
영업비용: md:order-1
실사비용: md:order-3
총설치비: md:order-5
총비용합계: md:order-7

# 오른쪽 열 (2, 4, 6, 8)
영업비용조정: md:order-2
실사비용조정: md:order-4
AS비용: md:order-6
커스텀추가비용: md:order-8
```

## 시각적 효과

### Before (현재 - 모바일)
```
1. 영업비용 💼
2. 영업비용 조정 ⚙️  ← 조정 카드가 중간에
3. 실사비용 🔍
4. 실사비용 조정 ⚙️  ← 조정 카드가 중간에
5. 총 설치비 🔧
6. AS 비용 ⚙️
7. 총 비용 합계 💰   ← 합계가 중간에!
8. 커스텀 추가비용 📝
```

### After (제안 - 모바일)
```
1. 영업비용 💼        ← 기본 비용
2. 실사비용 🔍        ← 기본 비용
3. 총 설치비 🔧       ← 기본 비용
4. 총 비용 합계 💰    ← ⭐ 합계가 상단에!
   ─────────────────
5. 영업비용 조정 ⚙️  ← 조정은 아래로
6. 실사비용 조정 ⚙️  ← 조정은 아래로
   ─────────────────
7. AS 비용 ⚙️        ← 추가 비용
8. 커스텀 추가비용 📝 ← 추가 비용
```

## 구현 위치

### 파일
`components/business/BusinessRevenueModal.tsx`

### 라인 범위
약 960-1520 라인 (비용 카드 섹션)

### 수정 방법
1. **Option A**: 조건부 렌더링으로 분기
   - 장점: 명확한 제어
   - 단점: 코드 중복

2. **Option B**: CSS Order 속성 활용 (권장)
   - 장점: 코드 간결, 유지보수 용이
   - 단점: Order 값 관리 필요

## 구현 체크리스트

- [ ] 현재 카드 위치 파악
- [ ] 컨테이너에 flex/grid 설정
- [ ] 각 카드에 order 클래스 추가
- [ ] 모바일 order 값 설정 (1-8)
- [ ] 데스크톱 md:order 값 설정
- [ ] 모바일 테스트 (375px, 414px)
- [ ] 태블릿 테스트 (768px)
- [ ] 데스크톱 테스트 (1024px+)
- [ ] 순서 변경 후 사용성 확인

## 예상 효과

### 사용자 경험
```yaml
improvement:
  - 핵심 정보(총 비용 합계)를 더 빨리 확인
  - 기본 비용과 조정 비용의 명확한 구분
  - 자연스러운 정보 흐름 (기본 → 합계 → 조정 → 추가)

cognitive_load:
  - 감소: 조정 카드가 기본 카드 사이에 끼지 않음
  - 감소: 합계가 중간이 아닌 명확한 위치에 표시
  - 증가 없음: 데스크톱 레이아웃은 동일
```

### 비즈니스 가치
- 사용자가 총 비용을 더 빨리 파악 → 의사결정 속도 향상
- 조정 항목의 분리 → 예외 케이스 관리 용이
- 직관적인 흐름 → 교육 비용 감소

## 롤백 계획

만약 새로운 순서가 문제가 있다면:
```yaml
option_1:
  - CSS order만 제거하면 원래 순서로 복귀
  - 간단한 클래스 삭제

option_2:
  - 일부 카드만 order 적용 (총 비용 합계만 위로)
  - 최소한의 변경

option_3:
  - 사용자 피드백 수집 후 순서 재조정
  - A/B 테스트 가능
```

## 접근성 고려사항

### 스크린 리더
- CSS order는 시각적 순서만 변경
- DOM 순서는 유지되어 스크린 리더는 기존 순서로 읽음
- **해결**: 중요한 경우 DOM 순서도 변경 고려

### 키보드 네비게이션
- Tab 순서는 DOM 순서를 따름
- CSS order와 Tab 순서가 다를 수 있음
- **현재**: 카드는 입력 필드가 많지 않아 영향 적음

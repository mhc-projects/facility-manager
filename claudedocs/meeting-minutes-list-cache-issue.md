# νμλ΅ λ©λ΅ νμ΄μ§€ μΊμ‹ λ¬Έμ  λ¶„μ„

## π› λ¬Έμ  ν„μƒ

**λ³΄κ³  μ‹κ°**: 2026-02-04
**URL**: `admin/meeting-minutes?refresh=1770195187589`

**μ¦μƒ**:
- νΈμ§‘ νμ΄μ§€μ—μ„ μƒνƒλ¥Ό "μ‘μ„±μ¤‘"μΌλ΅ λ³€κ²½
- μƒμ„Έ νμ΄μ§€μ—μ„λ” "μ‘μ„±μ¤‘"μΌλ΅ μ¬λ°”λ¥΄κ² ν‘μ‹λ¨ β…
- λ©λ΅ νμ΄μ§€λ΅ λμ•„κ°€λ©΄ μ—¬μ „ν "μ™„λ£"λ΅ ν‘μ‹λ¨ β
- refresh νλΌλ―Έν„°κ°€ μμμ—λ„ λ¶κµ¬ν•κ³  μΊμ‹λ λ°μ΄ν„° ν‘μ‹

## π” κ·Όλ³Έ μ›μΈ λ¶„μ„

### 1. λ©λ΅ νμ΄μ§€ API νΈμ¶ (Line 92-94)

**ν„μ¬ μ½”λ“**:
```typescript
// API νΈμ¶ (μΏ ν‚¤ κΈ°λ° μΈμ¦ μ‚¬μ©, μΊμ‹ λΉ„ν™μ„±ν™”)
const response = await fetch(`/api/meeting-minutes?${params}`, {
  cache: 'no-store'
})
```

**λ¬Έμ μ **:
- `cache: 'no-store'` μµμ…μ€ μμ§€λ§ **μ¶©λ¶„ν•μ§€ μ•μ**
- Next.js App Routerμ κ°•λ ¥ν• μΊμ‹± λ©”μ»¤λ‹μ¦
- λΈλΌμ°μ € μΊμ‹ + Next.js Router Cache + React Query Cache (μ μ¬μ )
- URL μΏΌλ¦¬ νλΌλ―Έν„°μ— μΊμ‹ λ²„μ¤ν… νƒ€μ„μ¤νƒ¬ν”„κ°€ **μ—†μ**

### 2. μƒμ„Έ/νΈμ§‘ νμ΄μ§€μ™€μ μ°¨μ΄μ 

**μƒμ„Έ νμ΄μ§€** ([id]/page.tsx Line 43-46):
```typescript
// β… μΊμ‹ λ²„μ¤ν… νƒ€μ„μ¤νƒ¬ν”„ μμ
const timestamp = Date.now()
const response = await fetch(`/api/meeting-minutes/${params.id}?_t=${timestamp}`, {
  cache: 'no-store'
})
```

**νΈμ§‘ νμ΄μ§€** ([id]/edit/page.tsx Line 103-106):
```typescript
// β… μΊμ‹ λ²„μ¤ν… νƒ€μ„μ¤νƒ¬ν”„ μμ
const timestamp = Date.now()
const response = await fetch(`/api/meeting-minutes/${params.id}?_t=${timestamp}`, {
  cache: 'no-store'
})
```

**λ©λ΅ νμ΄μ§€** (page.tsx Line 92-94):
```typescript
// β μΊμ‹ λ²„μ¤ν… νƒ€μ„μ¤νƒ¬ν”„ μ—†μ
const response = await fetch(`/api/meeting-minutes?${params}`, {
  cache: 'no-store'
})
```

### 3. λ°μ΄ν„° νλ¦„ λ¶„μ„

```
μ‚¬μ©μ: λ©λ΅ νμ΄μ§€ μ§„μ… (νμλ΅ A: μ™„λ£)
  β†“
API νΈμ¶: GET /api/meeting-minutes?page=1&limit=20
  β†“ (μ‘λ‹µ μΊμ‹λ¨)
λΈλΌμ°μ €/Next.js μΊμ‹: {id: A, status: 'completed'}
  β†“
μ‚¬μ©μ: νμλ΅ A ν΄λ¦­ β†’ μƒμ„Έ β†’ νΈμ§‘
  β†“
μ‚¬μ©μ: μƒνƒλ¥Ό "μ‘μ„±μ¤‘"μΌλ΅ λ³€κ²½ β†’ μ €μ¥
  β†“
API: PUT /api/meeting-minutes/A (status: 'draft')
DB μ—…λ°μ΄νΈ: β… status = 'draft'
  β†“
μƒμ„Έ νμ΄μ§€ μƒλ΅κ³ μΉ¨ (updated νλΌλ―Έν„°)
API: GET /api/meeting-minutes/A?_t=1770195187589 (β… μΊμ‹ μ°ν)
κ²°κ³Ό: β… "μ‘μ„±μ¤‘" μ¬λ°”λ¥΄κ² ν‘μ‹
  β†“
μ‚¬μ©μ: λ’¤λ΅κ°€κΈ° (refresh νλΌλ―Έν„° μ¶”κ°€λ¨)
URL: /admin/meeting-minutes?refresh=1770195187589
  β†“
useEffect μ¬μ‹¤ν–‰: loadMeetingMinutes() νΈμ¶
API: GET /api/meeting-minutes?page=1&limit=20 (β νƒ€μ„μ¤νƒ¬ν”„ μ—†μ)
  β†“
λΈλΌμ°μ €: "μ΄μ „μ— λ³Έ URLκ³Ό λ™μΌ" β†’ μΊμ‹μ—μ„ μ‘λ‹µ λ°ν™
κ²°κ³Ό: β {id: A, status: 'completed'} (μ¤λλ λ°μ΄ν„°)
```

## π§© μ™ `cache: 'no-store'`λ§μΌλ΅λ” λ¶€μ΅±ν•κ°€?

### Next.js 14 App Router μΊμ‹± λ μ΄μ–΄

1. **Request Memoization**: κ°™μ€ μ”μ²­μ„ μ¤‘λ³µ μ κ±°
2. **Data Cache**: fetch μ”μ²­μ„ μκµ¬ μ €μ¥
3. **Full Route Cache**: λΉλ“ νƒ€μ„ HTML/RSC μΊμ‹±
4. **Router Cache**: ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λΌμ°ν„° μΊμ‹±

`cache: 'no-store'`λ” μ£Όλ΅ **Data Cache**μ—λ§ μν–¥:
- β… Data Cache λΉ„ν™μ„±ν™”
- β Router Cache μ—¬μ „ν ν™μ„±
- β λΈλΌμ°μ € HTTP μΊμ‹ μ—¬μ „ν ν™μ„±

### URL νƒ€μ„μ¤νƒ¬ν”„μ μ¤‘μ”μ„±

```typescript
// β κ°™μ€ URL β†’ μΊμ‹ ννΈ
fetch('/api/meeting-minutes?page=1&limit=20', { cache: 'no-store' })
fetch('/api/meeting-minutes?page=1&limit=20', { cache: 'no-store' })

// β… λ‹¤λ¥Έ URL β†’ μΊμ‹ λ―Έμ¤ β†’ μƒ μ”μ²­
fetch('/api/meeting-minutes?page=1&limit=20&_t=1770195187589', { cache: 'no-store' })
fetch('/api/meeting-minutes?page=1&limit=20&_t=1770195299421', { cache: 'no-store' })
```

## β… ν•΄κ²° λ°©μ•

### λ©ν‘
λ©λ΅ νμ΄μ§€λ„ μƒμ„Έ/νΈμ§‘ νμ΄μ§€μ™€ λ™μΌν•κ² **μΊμ‹ λ²„μ¤ν… νƒ€μ„μ¤νƒ¬ν”„ μ¶”κ°€**

### κµ¬ν„ λ°©λ²•

#### μ„μΉ: `/app/admin/meeting-minutes/page.tsx` Line 92-94

**ν„μ¬**:
```typescript
const response = await fetch(`/api/meeting-minutes?${params}`, {
  cache: 'no-store'
})
```

**μμ •**:
```typescript
// μΊμ‹ μ°νλ¥Ό μ„ν• νƒ€μ„μ¤νƒ¬ν”„ μ¶”κ°€
const timestamp = Date.now()
const response = await fetch(`/api/meeting-minutes?${params}&_t=${timestamp}`, {
  cache: 'no-store'
})
```

### μμƒ ν¨κ³Ό

**Before (ν„μ¬)**:
```
API URL: /api/meeting-minutes?page=1&limit=20
μƒλ΅κ³ μΉ¨ν•΄λ„ λ™μΌ URL β†’ μΊμ‹ μ‚¬μ© β†’ μ¤λλ λ°μ΄ν„°
```

**After (μμ • ν›„)**:
```
API URL: /api/meeting-minutes?page=1&limit=20&_t=1770195187589
λ§¤λ² λ‹¤λ¥Έ νƒ€μ„μ¤νƒ¬ν”„ β†’ μΊμ‹ λ―Έμ¤ β†’ ν•­μƒ μµμ‹  λ°μ΄ν„°
```

## π“ μΌκ΄€μ„± κ²€μ¦

### μμ • ν›„ λ¨λ“  νμ΄μ§€μ API νΈμ¶ ν¨ν„΄

| νμ΄μ§€ | API νΈμ¶ | μΊμ‹ λ²„μ¤ν… | μƒνƒ |
|--------|---------|------------|------|
| λ©λ΅ νμ΄μ§€ | `GET /api/meeting-minutes?...&_t=${timestamp}` | β… μμ | μμ • ν•„μ” |
| μƒμ„Έ νμ΄μ§€ | `GET /api/meeting-minutes/[id]?_t=${timestamp}` | β… μμ | μ™„λ£ |
| νΈμ§‘ νμ΄μ§€ | `GET /api/meeting-minutes/[id]?_t=${timestamp}` | β… μμ | μ™„λ£ |

## π”¬ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### Test Case 1: μƒνƒ λ³€κ²½ ν›„ λ©λ΅ λ³µκ·€
```
1. λ©λ΅ νμ΄μ§€: νμλ΅ A "μ™„λ£" ν‘μ‹
2. νμλ΅ A ν΄λ¦­ β†’ μƒμ„Έ νμ΄μ§€
3. νΈμ§‘ λ²„νΌ β†’ νΈμ§‘ νμ΄μ§€
4. μƒνƒλ¥Ό "μ‘μ„±μ¤‘"μΌλ΅ λ³€κ²½ β†’ μ €μ¥
5. μƒμ„Έ νμ΄μ§€: β… "μ‘μ„±μ¤‘" ν‘μ‹
6. λ’¤λ΅κ°€κΈ° β†’ λ©λ΅ νμ΄μ§€
7. β… νμλ΅ Aκ°€ "μ‘μ„±μ¤‘"μΌλ΅ ν‘μ‹λμ–΄μ•Ό ν•¨ (ν„μ¬ β)
```

### Test Case 2: λ‚΄μ© μμ • ν›„ λ©λ΅ λ³µκ·€
```
1. λ©λ΅ νμ΄μ§€: νμλ΅ B μ λ© "κΈ°μ΅΄ μ λ©"
2. νμλ΅ B ν΄λ¦­ β†’ μƒμ„Έ β†’ νΈμ§‘
3. μ λ©μ„ "μƒ μ λ©"μΌλ΅ λ³€κ²½ β†’ μ €μ¥
4. μƒμ„Έ νμ΄μ§€: β… "μƒ μ λ©" ν‘μ‹
5. λ’¤λ΅κ°€κΈ° β†’ λ©λ΅ νμ΄μ§€
6. β… νμλ΅ B μ λ©μ΄ "μƒ μ λ©"μΌλ΅ ν‘μ‹λμ–΄μ•Ό ν•¨
```

### Test Case 3: ν•„ν„° μ μ© μ¤‘ μ—…λ°μ΄νΈ
```
1. λ©λ΅ νμ΄μ§€: "μ™„λ£" ν•„ν„° μ μ© (νμλ΅ C ν‘μ‹λ¨)
2. νμλ΅ C νΈμ§‘ β†’ μƒνƒλ¥Ό "λ³΄κ΄€"μΌλ΅ λ³€κ²½
3. λ©λ΅ λ³µκ·€
4. β… νμλ΅ Cκ°€ λ©λ΅μ—μ„ μ‚¬λΌμ Έμ•Ό ν•¨ (ν•„ν„° "μ™„λ£"μ—μ„ μ μ™Έ)
5. β… ν†µκ³„ μ«μ μ—…λ°μ΄νΈλ¨
```

## π”— κ΄€λ ¨ μ½”λ“

### μμ • ν•„μ” νμΌ
- `/app/admin/meeting-minutes/page.tsx` (Line 92-94)
  - `loadMeetingMinutes` ν•¨μ λ‚΄ fetch νΈμ¶

### μ°Έκ³  νμΌ (μ΄λ―Έ μ¬λ°”λ¥΄κ² κµ¬ν„λ¨)
- `/app/admin/meeting-minutes/[id]/page.tsx` (Line 43-46)
  - μƒμ„Έ νμ΄μ§€ μΊμ‹ λ²„μ¤ν… κµ¬ν„
- `/app/admin/meeting-minutes/[id]/edit/page.tsx` (Line 103-106)
  - νΈμ§‘ νμ΄μ§€ μΊμ‹ λ²„μ¤ν… κµ¬ν„

## π“ μν–¥ λ¶„μ„

### λ³€κ²½ λ²”μ„
- **νμΌ**: 1κ° (`page.tsx`)
- **λΌμΈ**: 3μ¤„ μμ •
- **ν•¨μ**: `loadMeetingMinutes` λ‚΄λ¶€

### λ¦¬μ¤ν¬ ν‰κ°€
- **λ¦¬μ¤ν¬ μμ¤€**: πΆ λ‚®μ
- **ν•μ„ νΈν™μ„±**: β… μ™„μ „ νΈν™ (νƒ€μ„μ¤νƒ¬ν”„λ” μ„λ²„μ—μ„ λ¬΄μ‹λ¨)
- **μ„±λ¥ μν–¥**: β… μ—†μ (λ™μΌν• API νΈμ¶ νμ)

### μ‚¬μ©μ κ²½ν— κ°μ„ 
- β… νΈμ§‘ ν›„ λ©λ΅ νμ΄μ§€μ—μ„ μ¦‰μ‹ λ³€κ²½μ‚¬ν•­ ν™•μΈ
- β… λ°μ΄ν„° μΌκ΄€μ„± λ³΄μ¥ (λ©λ΅ β†” μƒμ„Έ β†” νΈμ§‘)
- β… νΌλ€μ¤λ¬μ΄ UX ν•΄μ† (μƒμ„Έμ™€ λ©λ΅μ΄ λ‹¤λ¥Έ λ°μ΄ν„° ν‘μ‹)

## π’΅ μ¶”κ°€ κ³ λ ¤μ‚¬ν•­

### 1. API μ„λ²„ μΈ΅ νƒ€μ„μ¤νƒ¬ν”„ νλΌλ―Έν„° μ²λ¦¬

**ν„μ¬ μƒνƒ**:
- μ„λ²„λ” `_t` νλΌλ―Έν„°λ¥Ό λ¬΄μ‹ (μΏΌλ¦¬ νλΌλ―Έν„°μ— μ—†λ” ν•„λ“)
- ν΄λΌμ΄μ–ΈνΈ μΈ΅ μΊμ‹ λ²„μ¤ν… λ©μ μΌλ΅λ§ μ‚¬μ©

**κ¶μ¥μ‚¬ν•­**:
- ν„μ¬ κ·Έλ€λ΅ μ μ§€ (μ„λ²„ μμ • λ¶ν•„μ”)
- `_t` νλΌλ―Έν„°λ” μΊμ‹± λ©”μ»¤λ‹μ¦μ—λ§ μν–¥

### 2. λ‹¤λ¥Έ λ©λ΅ νμ΄μ§€μ—λ„ μ μ© ν•„μ”

**λ™μΌν• ν¨ν„΄μ΄ ν•„μ”ν• νμ΄μ§€**:
- `/admin/business` (μ‚¬μ—…μ¥ λ©λ΅)
- `/admin/air-permit` (λ€κΈ°ν•„μ¦ λ©λ΅)
- κΈ°νƒ€ CRUD λ©λ΅ νμ΄μ§€

**μ μ© μ›μΉ™**:
- νΈμ§‘ κ°€λ¥ν• μ—”ν‹°ν‹°μ λ©λ΅ νμ΄μ§€
- μƒμ„Έ νμ΄μ§€μ—μ„ λ°μ΄ν„° μμ • κ°€λ¥
- λ©λ΅μΌλ΅ λμ•„κ° λ• μµμ‹  λ°μ΄ν„° ν•„μ”

### 3. μ„±λ¥ μµμ ν™” (μ„ νƒμ‚¬ν•­)

ν„μ¬λ” λ§¤λ² μ „μ²΄ λ©λ΅μ„ μƒλ΅ λ΅λ“ν•μ§€λ§, ν–¥ν›„ κ°μ„  μ‹:

```typescript
// Option A: νΉμ • ν•­λ©λ§ μ—…λ°μ΄νΈ (Optimistic UI)
const updateMinuteInList = (updatedMinute: MeetingMinute) => {
  setMinutes(prev => prev.map(m =>
    m.id === updatedMinute.id ? updatedMinute : m
  ))
}

// Option B: Incremental Static Regeneration
// Next.js revalidate μµμ… ν™μ©

// Option C: Supabase Realtime
// μ‹¤μ‹κ°„ κµ¬λ…μΌλ΅ μλ™ μ—…λ°μ΄νΈ
```

**ν„μ¬λ”**: μ „μ²΄ μ¬λ΅λ”©μ΄ κ°€μ¥ μ•μ „ν•κ³  κµ¬ν„μ΄ κ°„λ‹¨

## π― κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] `loadMeetingMinutes` ν•¨μμ—μ„ `Date.now()` νΈμ¶
- [ ] fetch URLμ— `&_t=${timestamp}` νλΌλ―Έν„° μ¶”κ°€
- [ ] λΉλ“ λ° ν…μ¤νΈ
- [ ] Test Case 1-3 μλ™ κ²€μ¦
- [ ] μ»¤λ°‹ λ° ν‘Έμ‹

## π”„ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ μ™„μ„±

μ΄ μμ •μΌλ΅ νμλ΅ μ‹μ¤ν… μ „μ²΄μ—μ„ μΌκ΄€λ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈκ°€ μ™„μ„±λ©λ‹λ‹¤:

```
λ©λ΅ νμ΄μ§€ β†β†’ μƒμ„Έ νμ΄μ§€ β†β†’ νΈμ§‘ νμ΄μ§€
  β… refresh     β… updated      β… refresh
  β… μΊμ‹λ²„μ¤ν…   β… μΊμ‹λ²„μ¤ν…     β… μΊμ‹λ²„μ¤ν…
```

λ¨λ“  νμ΄μ§€μ—μ„ λ™μΌν• ν¨ν„΄:
1. URL μΏΌλ¦¬ νλΌλ―Έν„°λ΅ μ—…λ°μ΄νΈ νΈλ¦¬κ±°
2. `useSearchParams`λ΅ νλΌλ―Έν„° κ°μ§€
3. useEffect μ¬μ‹¤ν–‰μΌλ΅ λ°μ΄ν„° λ¦¬λ΅λ“
4. API νΈμ¶μ— `_t=timestamp` μΊμ‹ λ²„μ¤ν…
5. ν•­μƒ μµμ‹  λ°μ΄ν„° λ³΄μ¥

# 메모 및 업무 섹션 높이 개선 설계

## 📋 요구사항

### 문제 상황
- 메모 및 업무 섹션에 항목이 계속 늘어남
- 현재 고정된 높이로 인해 한 번에 보기 어려움
- 스크롤이 필요하지만 제한된 높이로 많은 항목 확인 불편

### 개선 목표
- 섹션 크기를 현재의 약 2배로 확대
- 더 많은 항목을 한 번에 볼 수 있도록 개선
- 반응형 디자인 유지

## 🎨 현재 상태 분석

### 현재 높이 설정
```tsx
// components/business/modals/BusinessDetailModal.tsx:643
<div className="space-y-2 sm:space-y-3 max-h-80 sm:max-h-96 overflow-y-auto pr-1 sm:pr-2">
```

**현재 높이**:
- **모바일**: `max-h-80` = 320px (80 × 4px)
- **데스크톱**: `sm:max-h-96` = 384px (96 × 4px)

### 문제점
1. **제한된 가시성**: 5~8개 항목만 한 번에 표시
2. **빈번한 스크롤**: 10개 이상 항목 시 스크롤 필수
3. **사용성 저하**: 전체 메모/업무 목록 파악 어려움

## 🎯 개선 설계

### 새로운 높이 설정

#### 옵션 1: 2배 확대 (권장)
```tsx
<div className="space-y-2 sm:space-y-3 max-h-[640px] sm:max-h-[768px] overflow-y-auto pr-1 sm:pr-2">
```

**새로운 높이**:
- **모바일**: `max-h-[640px]` = 640px (320px × 2)
- **데스크톱**: `sm:max-h-[768px]` = 768px (384px × 2)

**장점**:
- ✅ 10~15개 항목 한 번에 표시
- ✅ 스크롤 빈도 50% 감소
- ✅ 전체 목록 파악 용이

**단점**:
- ⚠️ 모달 전체 높이 증가
- ⚠️ 작은 화면에서 모달이 화면을 많이 차지

#### 옵션 2: 1.5배 확대 (절충안)
```tsx
<div className="space-y-2 sm:space-y-3 max-h-[480px] sm:max-h-[576px] overflow-y-auto pr-1 sm:pr-2">
```

**새로운 높이**:
- **모바일**: `max-h-[480px]` = 480px (320px × 1.5)
- **데스크톱**: `sm:max-h-[576px]` = 576px (384px × 1.5)

**장점**:
- ✅ 7~12개 항목 한 번에 표시
- ✅ 모달 높이 증가 최소화
- ✅ 균형잡힌 개선

**단점**:
- ⚠️ 여전히 많은 항목 시 스크롤 필요

#### 옵션 3: 동적 높이 (고급)
```tsx
<div className="space-y-2 sm:space-y-3 max-h-[min(640px,calc(100vh-300px))] sm:max-h-[min(768px,calc(100vh-250px))] overflow-y-auto pr-1 sm:pr-2">
```

**새로운 높이**:
- **모바일**: 최대 640px 또는 화면 높이에서 300px를 뺀 값 중 작은 값
- **데스크톱**: 최대 768px 또는 화면 높이에서 250px를 뺀 값 중 작은 값

**장점**:
- ✅ 화면 크기에 따라 최적화
- ✅ 작은 화면에서도 안전
- ✅ 큰 화면에서 최대한 활용

**단점**:
- ⚠️ CSS calc 함수 사용으로 복잡도 증가
- ⚠️ 다양한 화면 크기에서 테스트 필요

## 📊 비교 분석

### 높이별 표시 가능 항목 수 (추정)

| 화면 크기 | 현재 | 옵션 1 (2배) | 옵션 2 (1.5배) | 옵션 3 (동적) |
|-----------|------|--------------|----------------|---------------|
| 모바일 (320px) | 5~6개 | 10~12개 | 7~9개 | 8~10개 |
| 태블릿 (384px) | 6~8개 | 12~15개 | 9~12개 | 10~13개 |
| 데스크톱 (384px) | 6~8개 | 12~15개 | 9~12개 | 10~15개 |

*각 메모/업무 항목 평균 높이: 약 50~60px (타이틀 + 내용 + 여백)*

## 🎨 UI/UX 고려사항

### 모달 전체 레이아웃 영향

**현재 모달 구조**:
```
┌─────────────────────────────────┐
│ Header (헤더)                    │ ~80px
├─────────────────────────────────┤
│ 사업장 정보                      │ ~150px
├─────────────────────────────────┤
│ 업무진행현황                     │ ~100px
├─────────────────────────────────┤
│ 메모 및 업무 (현재)              │ 320~384px
│ - 스크롤 영역                    │
├─────────────────────────────────┤
│ 기타 섹션                        │ ~200px
└─────────────────────────────────┘
Total: ~850~914px
```

**옵션 1 적용 시**:
```
┌─────────────────────────────────┐
│ Header (헤더)                    │ ~80px
├─────────────────────────────────┤
│ 사업장 정보                      │ ~150px
├─────────────────────────────────┤
│ 업무진행현황                     │ ~100px
├─────────────────────────────────┤
│ 메모 및 업무 (확대)              │ 640~768px
│ - 스크롤 영역                    │
├─────────────────────────────────┤
│ 기타 섹션                        │ ~200px
└─────────────────────────────────┘
Total: ~1170~1298px
```

### 화면 크기별 대응

**소형 화면 (< 640px)**:
- 모달이 화면의 95%를 차지 (`max-h-[95vh]`)
- 메모 섹션 높이를 제한하여 다른 정보도 볼 수 있도록

**중형 화면 (640px ~ 1024px)**:
- 모달이 화면의 90%를 차지
- 메모 섹션을 충분히 확대하여 가시성 확보

**대형 화면 (> 1024px)**:
- 모달이 고정된 최대 크기 유지
- 메모 섹션을 최대한 활용

## 💡 권장 사항

### 최종 권장: **옵션 1 (2배 확대) + 반응형 최적화**

```tsx
<div className="space-y-2 sm:space-y-3 max-h-[640px] sm:max-h-[768px] md:max-h-[800px] overflow-y-auto pr-1 sm:pr-2" style={{scrollbarWidth: 'thin'}}>
```

**이유**:
1. **명확한 개선**: 2배 확대로 확실한 사용성 향상
2. **반응형 최적화**: 중형/대형 화면에서 추가 확대
3. **단순한 구현**: CSS calc 없이 Tailwind 클래스만 사용
4. **테스트 용이**: 명확한 breakpoint로 테스트 간편

### 구현 단계

#### 1단계: 기본 높이 확대
```tsx
// Before
max-h-80 sm:max-h-96

// After
max-h-[640px] sm:max-h-[768px] md:max-h-[800px]
```

#### 2단계: 모달 전체 높이 조정 (필요 시)
```tsx
// 모달 컨테이너
max-h-[95vh] → 변경 없음 (이미 반응형)
```

#### 3단계: 스크롤바 스타일 유지
```tsx
style={{scrollbarWidth: 'thin'}} // 이미 적용됨
```

## 🧪 테스트 시나리오

### 테스트 케이스

#### TC1: 소량 항목 (1~5개)
- **목적**: 높이 확대로 인한 빈 공간 확인
- **기대 결과**: 자연스러운 레이아웃, 불필요한 공간 없음

#### TC2: 중량 항목 (6~15개)
- **목적**: 개선된 가시성 확인
- **기대 결과**: 대부분 항목이 한 번에 표시, 스크롤 최소화

#### TC3: 대량 항목 (16개 이상)
- **목적**: 스크롤 동작 확인
- **기대 결과**: 스크롤 부드럽게 작동, 모든 항목 접근 가능

#### TC4: 다양한 화면 크기
- **모바일** (375px × 667px): iPhone SE
- **태블릿** (768px × 1024px): iPad
- **데스크톱** (1920px × 1080px): Full HD

**검증 항목**:
- [ ] 모달이 화면을 벗어나지 않음
- [ ] 메모 섹션이 적절한 크기로 표시됨
- [ ] 스크롤이 자연스럽게 작동
- [ ] 다른 섹션들도 여전히 접근 가능

## 📝 대안 고려사항

### 대안 1: 접기/펼치기 기능 추가
```tsx
<button onClick={() => setExpanded(!expanded)}>
  {expanded ? '접기' : '더보기'}
</button>
```

**장점**: 사용자가 높이 조절 가능
**단점**: 추가 구현 필요, UI 복잡도 증가

### 대안 2: 별도 전체 화면 모달
```tsx
<button onClick={openFullScreenMemoModal}>
  전체 메모/업무 보기
</button>
```

**장점**: 무제한 공간 활용
**단점**: 추가 모달 필요, 컨텍스트 전환

### 대안 3: 페이지네이션
```tsx
<Pagination currentPage={page} totalPages={totalPages} />
```

**장점**: 높이 고정 유지
**단점**: 전체 목록 파악 어려움, 클릭 필요

## 🔄 구현 영향 분석

### 변경 파일
- `components/business/modals/BusinessDetailModal.tsx`: 1줄 수정

### 영향 범위
- **직접 영향**: 메모 및 업무 섹션 높이만 변경
- **간접 영향**: 모달 스크롤 동작 (전체 모달도 스크롤 가능)

### 위험도
- **낮음**: CSS 클래스 변경만으로 간단히 적용 및 복구 가능

### 롤백 계획
```tsx
// 문제 발생 시 즉시 원래 값으로 복구
max-h-[640px] sm:max-h-[768px] → max-h-80 sm:max-h-96
```

## 📊 사용자 피드백 수집

### 개선 후 확인 사항
1. **사용성 향상**: 메모/업무 확인이 더 편해졌는가?
2. **스크롤 빈도**: 스크롤 필요성이 감소했는가?
3. **전체 레이아웃**: 모달 전체가 여전히 사용하기 편한가?
4. **성능**: 많은 항목 로드 시 성능 문제 없는가?

## 🚀 구현 계획

### Phase 1: 높이 확대 (즉시 적용 가능)
```tsx
// 단순 클래스 변경
max-h-80 sm:max-h-96
→ max-h-[640px] sm:max-h-[768px] md:max-h-[800px]
```

### Phase 2: 사용자 피드백 수집 (1주일)
- 관리자 사용 피드백
- 모바일/데스크톱 사용성 확인
- 항목 수에 따른 만족도 조사

### Phase 3: 최적화 (필요 시)
- 동적 높이 적용 고려
- 접기/펼치기 기능 추가 고려
- 별도 전체 화면 모달 고려

## 📖 참고 사항

### Tailwind 임의 값 사용
```tsx
// Tailwind에서 제공하지 않는 값은 [값] 형식으로 사용
max-h-[640px]  // ✅ 640px
max-h-[768px]  // ✅ 768px
max-h-[800px]  // ✅ 800px
```

### 스크롤바 스타일
```tsx
// 얇은 스크롤바 유지 (Firefox)
style={{scrollbarWidth: 'thin'}}

// Chrome/Safari는 CSS로 추가 스타일 가능
className="... scrollbar-thin scrollbar-thumb-gray-400"
```

## ✅ 구현 체크리스트

- [ ] BusinessDetailModal.tsx 파일 수정
- [ ] 높이 클래스 변경 (max-h-80 → max-h-[640px])
- [ ] 반응형 높이 추가 (sm:, md: breakpoints)
- [ ] 로컬 환경에서 테스트
- [ ] 모바일 화면 테스트 (Chrome DevTools)
- [ ] 태블릿 화면 테스트
- [ ] 데스크톱 화면 테스트
- [ ] 다양한 항목 수로 테스트 (1개, 10개, 20개)
- [ ] 스크롤 동작 확인
- [ ] 커밋 및 배포

## 🎯 기대 효과

### 정량적 개선
- **가시 항목 수**: 5~8개 → 10~15개 (약 2배)
- **스크롤 빈도**: 50% 감소
- **항목 확인 시간**: 30% 단축

### 정성적 개선
- ✅ 전체 메모/업무 목록 한눈에 파악
- ✅ 빈번한 스크롤로 인한 불편 감소
- ✅ 업무 효율성 향상
